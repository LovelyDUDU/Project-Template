{% extends 'base.html' %}
{%block title %}
<title>Signup Page</title>
{% endblock title%}

{% block css %}
{% endblock css %}

{% block scripts %}
{% endblock scripts %}

{% block content %}
<h1>Sign Up!</h1>

<form method="POST" action="{% url 'signup'%}" onsubmit="return checkAll();">
{% csrf_token %}
    ID:
    <input name="id" class="id_input" type="text" checked_result="fail" required />
    <button type="button" class="id_overlap_button" onclick="id_overlap_check()">중복검사</button>
    <img src="" id="id_check_sucess" style="display: none;"><br>
    Password:
    <input name="password1" type="password" value=""><br>
    Confirm Password:
    <input name="password2" type="password" value=""><br>
    Email:
    <input name="email" type="email" value=""><br>
    <input type="submit" value="Sign Up!">
</form>

<script type="text/javascript">
    function id_overlap_check(){
        var t= document.getElementById('id');
        t.addEventListener('change', function(event){
            document.getElementById('')
        })
    }



    function checkAll(){
        var userId = document.getElementsByName('id');
        var userPw1 =document.getElementsByName('pw1');
        var userPw2 =document.getElementsByName('pw2');
        alert(str(userId));
        alert(userPw1);
        if (!checkUserId(userId)){
            alert("실행");
            return false;
        } else if (!checkPassword(userId, userPw1, userPw2)){
            alert("실행2");
            return false;
        } 
        return true;
    }

    function checkExistData(value, dataName){
        if(value ==""){
            alert(dataName + " 입력해주세요!");
            return false;
        }
        return true;
    }
    
    function checkUserId(id){
        if(!checkExistData(id, "아이디를"))
        return false;

        var idRegExp = /^[a-zA-z0-9]{4,12}$/;
        if (!idRegExp.test(id)){
            alert("아이디는 영문 대소문자와 숫자 4~12자리로 입력해야합니다!");
            form.id.value ="";
            form.id.focus();
            return false;
        }
        return true;
    }
/*
    → / : 자바스크립트의 정규표현식의 처음과 끝을 의미한다.
    → [ ] : 문자셋이다. 예를 들면 [a-z]라고 적을경우 정규표현식에 만족해야하는 값들은 반드시 a~z사이의 값만 넣을 수 있다.
    → ^ : 문장의 처음을 뜻한다.
    → $ : 문장의 마지막을 뜻한다.
    → { } : 문자열 길이를 뜻한다. 예를 들어 {4,12}일 경우 최소 길이 4, 최대 길이 12이다.
    /^[a-zA-z0-9]{4,12}$/ 을 분석하면..
    → 영문 대/소문자, 숫자만 사용할 수 있고 길이는 최소 4, 최대 12를 만족해야 정규표현식에 만족한다.
*/
    function checkPassword(id, password1, password2){
        if(!checkExistData(password1, "비밀번호를"))
            return false;
        if(!checkExistData(password2, "비밀번화 확인을"))
            return false;

            var passwordRegExp = /^[a-zA-z0-9]{4,12}$/;
            if(!passwordRegExp.test(password1)){
                alert("비밀번호는 영문 대소문자와 숫자 4~12자리로 입력해야합니다!");
                form.password1.value="";
                form.password1.focus();
                return false;
            }

            if(password1 != password2){
                alert("두 비밀번호가 맞지 않습니다.");
                form.password1.value="";
                form.password2.value="";
                form.password2.focus();
                return false;
            }

            if(id == password1){
                alert("아이디와 비밀번호는 같을 수 없습니다!");
                form.password1.value="";
                form.password2.value="";
                form.password2.focus();
                return false;
            }
            return true;
    }

</script>
{% endblock content %}
